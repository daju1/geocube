dnl EJP: got this one mostly from gnuplot 3.6 beta
dnl aclocal.m4 generated automatically by aclocal 1.1e
dnl $Id: aclocal.m4,v 1.4 1997/05/27 01:28:45 drd Exp $

dnl not clear to me if this is supposed to be autogenerated
dnl but I have modified the compiler flags since -Xc
dnl breaks header files on solaris

## ------------------------------- ##
## Check for function prototypes.  ##
## From Franc,ois Pinard           ##
## ------------------------------- ##

# serial 1

AC_DEFUN(AM_C_PROTOTYPES,
[AC_REQUIRE([AM_PROG_CC_STDC])
AC_BEFORE([$0], [AC_C_INLINE])
AC_MSG_CHECKING([for function prototypes])
if test "$am_cv_prog_cc_stdc" != no; then
  AC_MSG_RESULT(yes)
  AC_DEFINE(PROTOTYPES)
  U= ANSI2KNR=
else
  AC_MSG_RESULT(no)
  U=_ ANSI2KNR=./ansi2knr
  # Ensure some checks needed by ansi2knr itself.
  AC_HEADER_STDC
  AC_CHECK_HEADERS(string.h)
fi
AC_SUBST(U)dnl
AC_SUBST(ANSI2KNR)dnl
])

## ----------------------------------------- ##
## ANSIfy the C compiler whenever possible.  ##
## From Franc,ois Pinard                     ##
## ----------------------------------------- ##

# serial 1

# @defmac AC_PROG_CC_STDC
# @maindex PROG_CC_STDC
# @ovindex CC
# If the C compiler in not in ANSI C mode by default, try to add an option
# to output variable @code{CC} to make it so.  This macro tries various
# options that select ANSI C on some system or another.  It considers the
# compiler to be in ANSI C mode if it defines @code{__STDC__} to 1 and
# handles function prototypes correctly.
#
# If you use this macro, you should check after calling it whether the C
# compiler has been set to accept ANSI C; if not, the shell variable
# @code{am_cv_prog_cc_stdc} is set to @samp{no}.  If you wrote your source
# code in ANSI C, you can make an un-ANSIfied copy of it by using the
# program @code{ansi2knr}, which comes with Ghostscript.
# @end defmac

AC_DEFUN(AM_PROG_CC_STDC,
[AC_REQUIRE([AC_PROG_CC])
AC_MSG_CHECKING(for ${CC-cc} option to accept ANSI C)
AC_CACHE_VAL(am_cv_prog_cc_stdc,
[am_cv_prog_cc_stdc=no
ac_save_CC="$CC"
# Don't try gcc -ansi; that turns off useful extensions and
# breaks some systems' header files.
# AIX			-qlanglvl=ansi
# Ultrix and OSF/1	-std1
# HP-UX			-Ae
# SVR4			-Xa -D__EXTENSIONS__ (-Xc breaks solaris headers)
for ac_arg in ""  "-qlanglvl=ansi"  "-std1"  "-Ae" "-Xa -D__EXTENSIONS__"
do
  CC="$ac_save_CC $ac_arg"
  AC_TRY_COMPILE(
[#if !defined(__STDC__) || __STDC__ != 1
choke me
#endif
], [/* DYNIX/ptx V4.1.3 can't compile sys/stat.h with -Xc -D__EXTENSIONS__. */
#ifdef _SEQUENT_
# include <sys/types.h>
# include <sys/stat.h>
#endif
int test (int i, double x);
struct s1 {int (*f) (int a);};
struct s2 {int (*f) (double a);};],
[am_cv_prog_cc_stdc="$ac_arg"; break])
done
CC="$ac_save_CC"
])
AC_MSG_RESULT($am_cv_prog_cc_stdc)
case "x$am_cv_prog_cc_stdc" in
  x|xno) ;;
  *) CC="$CC $am_cv_prog_cc_stdc" ;;
esac
])


## ------------------------------- ##
## Check for MS-DOS/djgpp.         ##
## From Lars Hecking               ##
## ------------------------------- ##

# serial 1

# AC_DEFUN(AC_MSDOS,
# [AC_MSG_CHECKING(for MS-DOS/djgpp)
# AC_EGREP_CPP(yes,
# [#ifdef __DJGPP__ && __DJGPP__ == 2
# yes
# #endif
# ], LDFLAGS="$LDFLAGS -lpc"
#  AC_DEFINE(MSDOS)
#  AC_DEFINE(DOS32)
#  AC_MSG_RESULT(yes),AC_MSG_RESULT(no))
# ])

AC_DEFUN(AC_MSDOS,
[AC_REQUIRE_CPP()dnl
AC_CACHE_CHECK(for MS-DOS/djgpp, ac_cv_djgpp,
[AC_EGREP_CPP(yes,
[#ifdef __DJGPP__ && __DJGPP__ == 2
yes
#endif
], LDFLAGS="$LDFLAGS -lpc"
 AC_DEFINE(MSDOS)
 AC_DEFINE(DOS32)
 ac_cv_djgpp=yes,ac_cv_djgpp=no)
])
])

dnl Check if lex declares yytext as unsigned char[] by default, not a char[].
undefine([AC_DECL_YYTEXT_UNSIGNED])
AC_DEFUN(AC_DECL_YYTEXT_UNSIGNED,
[AC_REQUIRE_CPP()dnl
AC_REQUIRE([AC_PROG_LEX])dnl
AC_CACHE_CHECK(whether yytext is unsigned, ac_cv_prog_lex_yytext_unsigned,
[# yytext may be char[] or unsigned char[]; Figure out which it is
echo '%%
%%' | $LEX
changequote(<<, >>)dnl
ac_cv_prog_lex_yytext_unsigned=no
echo 'extern unsigned char yytext[];' >>$LEX_OUTPUT_ROOT.c
changequote([, ])dnl
ac_save_LIBS="$LIBS"
LIBS="$LIBS $LEXLIB"
AC_TRY_LINK(`cat $LEX_OUTPUT_ROOT.c`, , ac_cv_prog_lex_yytext_unsigned=yes)
LIBS="$ac_save_LIBS"
rm -f "${LEX_OUTPUT_ROOT}.c"
])
dnl
if test $ac_cv_prog_lex_yytext_unsigned = yes; then
  AC_DEFINE(YYTEXT_UNSIGNED)
fi
])
